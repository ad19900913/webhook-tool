<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>系统监控 - Webhook工具</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>🖥️ 系统监控</h1>
            <div class="header-actions">
                <button id="backBtn" class="btn btn-secondary">返回主页</button>
                <button id="refreshBtn" class="btn btn-primary">刷新数据</button>
            </div>
        </header>

        <!-- 监控控制面板 -->
        <div class="monitor-controls">
            <div class="control-group">
                <button id="startMonitorBtn" class="btn btn-success">启动监控</button>
                <button id="stopMonitorBtn" class="btn btn-danger">停止监控</button>
                <span id="monitorStatus" class="status-indicator">未启动</span>
            </div>
            <div class="control-group">
                <label for="monitorInterval">监控间隔:</label>
                <select id="monitorInterval">
                    <option value="1000">1秒</option>
                    <option value="5000" selected>5秒</option>
                    <option value="10000">10秒</option>
                    <option value="30000">30秒</option>
                </select>
            </div>
        </div>

        <!-- 系统概览 -->
        <div class="overview-section">
            <h2>系统概览</h2>
            <div class="overview-grid">
                <div class="overview-card">
                    <div class="card-header">
                        <h3>🖥️ CPU</h3>
                        <span id="cpuUsage" class="usage-value">--</span>
                    </div>
                    <div class="card-content">
                        <div class="progress-bar">
                            <div id="cpuProgress" class="progress-fill"></div>
                        </div>
                        <div class="metrics-grid">
                            <div class="metric-item">
                                <span class="metric-label">核心数:</span>
                                <span id="cpuCores">--</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">负载:</span>
                                <span id="cpuLoad">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-header">
                        <h3>💾 内存</h3>
                        <span id="memoryUsage" class="usage-value">--</span>
                    </div>
                    <div class="card-content">
                        <div class="progress-bar">
                            <div id="memoryProgress" class="progress-fill"></div>
                        </div>
                        <div class="metrics-grid">
                            <div class="metric-item">
                                <span class="metric-label">已用:</span>
                                <span id="memoryUsed">--</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">可用:</span>
                                <span id="memoryFree">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-header">
                        <h3>💿 磁盘</h3>
                        <span id="diskUsage" class="usage-value">--</span>
                    </div>
                    <div class="card-content">
                        <div class="progress-bar">
                            <div id="diskProgress" class="progress-fill"></div>
                        </div>
                        <div class="metrics-grid">
                            <div class="metric-item">
                                <span class="metric-label">文件系统:</span>
                                <span id="diskFilesystems">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="overview-card">
                    <div class="card-header">
                        <h3>🌐 网络</h3>
                        <span id="networkConnections" class="usage-value">--</span>
                    </div>
                    <div class="card-content">
                        <div class="metrics-grid">
                            <div class="metric-item">
                                <span class="metric-label">接口数:</span>
                                <span id="networkInterfaces">--</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">连接数:</span>
                                <span id="networkActiveConnections">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 实时图表 -->
        <div class="charts-section">
            <h2>实时监控图表</h2>
            <div class="charts-grid">
                <div class="chart-container">
                    <h3>CPU使用率趋势</h3>
                    <canvas id="cpuChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>内存使用率趋势</h3>
                    <canvas id="memoryChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>磁盘使用率趋势</h3>
                    <canvas id="diskChart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>系统负载趋势</h3>
                    <canvas id="loadChart"></canvas>
                </div>
            </div>
        </div>

        <!-- 告警管理 -->
        <div class="alerts-section">
            <h2>告警管理</h2>
            <div class="alerts-header">
                <div class="alerts-controls">
                    <button id="clearAlertsBtn" class="btn btn-warning">清除所有告警</button>
                    <select id="alertFilter">
                        <option value="">全部告警</option>
                        <option value="warning">警告</option>
                        <option value="critical">严重</option>
                    </select>
                </div>
                <div class="alerts-count">
                    告警数量: <span id="alertsCount">0</span>
                </div>
            </div>
            <div id="alertsList" class="alerts-list"></div>
        </div>

        <!-- 告警阈值设置 -->
        <div class="thresholds-section">
            <h2>告警阈值设置</h2>
            <div class="thresholds-form">
                <div class="threshold-group">
                    <label for="cpuWarning">CPU警告阈值 (%)</label>
                    <input type="number" id="cpuWarning" min="0" max="100" value="80">
                </div>
                <div class="threshold-group">
                    <label for="cpuCritical">CPU严重阈值 (%)</label>
                    <input type="number" id="cpuCritical" min="0" max="100" value="95">
                </div>
                <div class="threshold-group">
                    <label for="memoryWarning">内存警告阈值 (%)</label>
                    <input type="number" id="memoryWarning" min="0" max="100" value="80">
                </div>
                <div class="threshold-group">
                    <label for="memoryCritical">内存严重阈值 (%)</label>
                    <input type="number" id="memoryCritical" min="0" max="100" value="95">
                </div>
                <div class="threshold-group">
                    <label for="diskWarning">磁盘警告阈值 (%)</label>
                    <input type="number" id="diskWarning" min="0" max="100" value="85">
                </div>
                <div class="threshold-group">
                    <label for="diskCritical">磁盘严重阈值 (%)</label>
                    <input type="number" id="diskCritical" min="0" max="100" value="95">
                </div>
                <button id="saveThresholdsBtn" class="btn btn-primary">保存阈值</button>
            </div>
        </div>

        <!-- 历史数据 -->
        <div class="history-section">
            <h2>历史数据</h2>
            <div class="history-controls">
                <select id="historyType">
                    <option value="cpu">CPU数据</option>
                    <option value="memory">内存数据</option>
                    <option value="disk">磁盘数据</option>
                    <option value="network">网络数据</option>
                    <option value="process">进程数据</option>
                </select>
                <select id="historyLimit">
                    <option value="10">最近10条</option>
                    <option value="25">最近25条</option>
                    <option value="50">最近50条</option>
                    <option value="100" selected>最近100条</option>
                </select>
                <button id="exportHistoryBtn" class="btn btn-secondary">导出数据</button>
            </div>
            <div id="historyData" class="history-data"></div>
        </div>
    </div>

    <script src="system-monitor.js"></script>
</body>
</html>
